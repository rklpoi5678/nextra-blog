## 핵심
애니메이션이 느리게 실행되거나 버벅거리며 끊길때 문제를 해결하기 위해 적용할수도있다.

### **브라우저가 UI를 렌더링 하는 과정**
![[Pasted image 20250814113808.png]]
- 스타일단: html요소에 적용된 스타일계산 (CSS 에서 설정한 폰트크기,색상)
- 레이아웃단: 요소 위치,크기 결정, 어디에 배치될지,얼마나 큰지, (CSS에 width,height,top,bottom,left,right등의 속성들이 이 단계에 영향을 미침)
- 페인트단: 요소의 픽셀을 채운다. 색상&배경색 등을 실제로 그리는 단계이다. (CSS color,background-color등의 속성들이 이 단계에 영향을 미침)
- 컴포짓단: 분리된 레이어를 합성한다. 여러 개의 레이어를 하나로 합쳐서 최종적으로 보여주는 단계이다.

### **리플로우(reflow)줄이기**
레이아웃에 영향을 미치는 속성이 변경되면, 페이지의 전체 혹은 일부 레이아웃을 다시 계산해야 하는데요. 이를 레이아웃 리플로우(reflow)라고 합니다. 리플로우가 일어나면 다시 Layout, Paint, Composite 단계를 거치게 되는데, 이런 변경이 자주 일어나면 성능에 좋지 않은 영향을 미칠 수 있어요.
>그래서 애니메이션 성능을 높이려면 리플로우와 리페인트를 줄이고, Composite 단계에서의 변형을 이용하는 것이 좋습니다.

- Layout과 Paint 단계는 주로 메인 스레드에서 CPU를 사용해 처리됨
- 이와 달리 Composite단는 별도의 컴포지터 스레드에서 GPU를 활용해 처리됨 메인작업에 영향을 주지 않으면서도 빠르게 애니메이션을 처리할수있다.

### transform,opacity 속성 활용하기
이 속성들은 별도의 레이어가 생성 -> GPU처리 -> Composite 단계에서만 작업이 이루어져 훨씬 빠르고 매끄럽게 애니메이션을 실행할수있다.

### will-change 속성 사용
해당 속성이 앞으로 변경될거라는것을 브라우저가 미리 준비할수있도록함, 브라우저가 별도의 레이어로 분리시키거나 그외 다른 최적화를 할 수 있음
> `transform`이나 `opacity`는 실제 변화가 일어나는 시점에 레이어 분리가 되는데 반해, `will-change`를 이용하면 미리 레이어를 분리시켜 놓는답니다. 또한 그 외에 브라우저가 필요하다고 판단하는 최적화도 추가로 진행하기 때문에, 필요하다면 `will-change`를 함께 사용하면 좋아요.

단, 주의해야 할 점이 있는데요. 최적화를 하는 것 자체를 위해서도 브라우저 차원에서 시간과 자원이 들기 때문에 너무 자주 사용하면 오히려 성능에 악영향을 줄 수 있습니다. 현재 애니메이션의 성능을 먼저 확인해 보고, 정말 필요할 때만 아껴서 사용하도록 합시다.

## 그외
3D 변환이나 `perspective` 속성을 사용해도 레이어가 분리 , 현재는 주로 `will-change`를 사용하는 것이 일반적
개발자도구 > More tools > Layers 에서 현재 생성되어 있는 레이어들의 종류를 직접 확인할수있다.
## 핵심
큰 TypeScript 프로젝트를 여러 개의 작은 조각(서브 프로젝트)으로 나누어 관리하는 방법이다. 이렇게 하면 작업이 훨씬 효율적이고 빨라진다.

## 왜 필요한가?
- 컴파일 속도 저하: 코드가 너무 많으면, 작은 부분 하나만 바꿔도 전체를 다시 컴파일해야 해서 시간이 오래 걸린다.
- 코드 종속성 관리의 어려움: 서로의 코드에 대한 의존성이 엉켜서 꼬이기 쉬워진다.
- 빌드 시스템 복잡성 증가: 거대한 프로젝트를 효율적으로 빌드하기 위한 설정이 너무 복잡해진다.

> TypeScript는 '프로젝트 참조'라는 기능을 제공한다. 하나의 큰 프로젝트를 여러 개의 작은 TypeScript 프로젝트(서브 프로젝트)로 나누는 방법이다. 각 서브 프로젝트는 자신만의 `tsconfig.json`을 가지고 독립적으로 관리된다. 그리고 이 서브 프로젝트들이 서로를 '참조'해서 연결되는 것이다.
->
### 이렇게 하면?
- 빠른 컴파일: 특정 서브 프로젝트의 코드만 바뀌면, 해당 서브 프로젝트와 그 서브 프로젝트에 의존하는 부분만 다시 컴파일하면 된다. 전체를 다 할 필요가 없으니 훨씬 빨라진다.
- 명확한 종속성: tsconfig.json파일에 명확하게 선언할 수 있어서, 종속성 관계를 한눈에 파악하기 쉽다.
- 모듈성 향상: 프로젝트를 논리적인 단위로 나누고 재사용성을 높일 수 있다.

##  프로젝트 참조 설정하기: 레고 조각들 연결하기
프로젝트 참조를 사용하려면 `tsconfig.json`파일에 몇 가지를 추가해야한다.

### 2.1`references`추가하기
각 서브 프로젝트의 tsconfig.json파일에, 이 프로젝트가 참조하는(의존하는) 다른 서브 프로젝트의 경로를 references배열에 추가한다.

```JSON
// packages/core/tsconfig.json (핵심 로직 서브 프로젝트)
{
	"compilerOptions": {
		// ... (컴파일러 옵션)
	},
	// 이 프로젝트는 다른 프로젝트를 참조하지 않을 수 있음
}

// packages/ui/tsconfig.json (Ui 컴포넌트 서브 프로젝트)
{
	"compilerOptions": {
		// ...
	},
	"references": [
		{ "path": "../core"}
		// core 프로젝트에 의존함
	]
}

// apps/web/tsconfig.json ( 웹 애플리케이션 서브 프로젝트 )
{
	"compilerOptions": {
		// ...
	},
	"references": [
		{ "path": "../../packages/core" },//core 프로젝트에 의존함
		{ "path": "../../packages/ui" } //ui 프로젝트에 의존함
	]

}
```
위 예시에서 web앱은 ui와 core에 의존하고, ui는 core에 의존하는 식이다.

### **2.2 `composite: true`설정(필수)**
참조되는(다른 프로젝트가 의존하는) 모든 서브 프로젝트의 tsconfig.json 파일에는 compilerOptions안에 반드시 "composite": true를 추가해야한다.

```JSON
//packages/core/tsconfig.json
{
	"compilerOptions": {
		"composite": true,
		//필수! 이 프로젝튼는 다른 곳에서 참조될 수 있음
	}

}
```
TS 컴파일러에게 " 이 프로젝트는 다른 프로젝트에서 참조될 수 있으니, 나중에 내가 변경되면 나를 참고하는 다른 프로젝트들도 다시 확인해야해 "라고 알려주는 일종의 표시이다.

### **2.3`declaration: true`(권장)**
참조되는 프로젝트의 경우, compilerOptions에 "declaration":true를 추가하는 것이 좋다.
- 프로젝트의 .ts 파일과 함께 **.d.ts(선언 파일)** 를 생성하라는 의미이다.
- .d.ts 파일은 TS가 해당 모듈의 '타입 정보'를 알 수 있도록 해준다. 이 파일이 없으면 다른 프로젝트에서 해당 모듈을 가져다 쓸 때 타입 체크가 제대로 안 될 수 있다.

## `tsc --build` (또는 `tsc -b`): 똑똑한 빌드 명령어
tsc --build(또는 줄여서 tsc -b)명령어를 사용해야 한다.
- 참조 관계를 자동으로 파악해서, 변경된 서브 프로젝트와 그에 의존하는 프로젝트만 효율적으로 다시 빌드한다.
- ex: core 프로젝트의 파일 하나만 바뀌면, tsc -b는 core만 다시 빌드하고, 그 다음에 core를 참조하는 ui를 빌드하고, 마지막으로 ui와 core를 참조하는 web을 빌드해준다. 바뀌지 않은 부분은 건드리지 않으니 전체 빌드 시간이 확 줄어드는 효과가있다.
> "이 부붐이 바뀌었으니, 이 부품과 연결된 부분만 다시 확인해서 조립하자!라고 얘기"

## 다른 유용한 기능들
- prepend 옵션: 참조 프로젝트의 출력 파일을 현재 프로젝트의 출력 파일 맨 앞에 합칠 수 있게 해준다. (단일 JS 파일로 만들 때 유용할 수 있지만, 일반적으로 모듈 시스템을 통해 관리하므로 자주 쓰이진 않는다.)
- outFile와 함께 사용: outFile(여러 파일을 하나의 JS 파일로 합치는 옵션)과 함께 사용할 때도 references가 잘 작동해요
- 경로 매핑(paths): 프로젝트 참조와 별개로, 모듈 임포트 경로를 짧게 줄여주는 paths옵션도 여전히 유용하게 사용할 수 있다.

> TS의 프로젝트 참조는 큰 TS 프로젝트를 여러 개의 작은, 독립적인 서브 프로젝트로 나누어 관리하는 강력한 방법이다.

> 이렇게 하면 컴파일 속도가 빨라지고, 코드 종속성이 명확해지며, 프로젝트의 모듈성도 높아진다.